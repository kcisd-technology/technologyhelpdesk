-level ||= 0
%div{:style=>"margin-left:#{level*5}px"}
  %b= comment.title
  %i= "By: " + ((comment.user && comment.user.login) || 'nobody')
  %br/
  %div= comment.body
  -if comment.full_control_by_current_user?
    %div
      =link_to link_to 'Edit', edit_comment_path(comment, :return_to => request.path)
      |
      =link_to link_to 'Destroy', comment, :confirm => 'Are you sure?', :method => :delete
  -unless comment.comments.empty?
    %div{:style=>'border-left:1px dotted red; padding-bottom:5px; margin-left:5px;'}
      %hr/
      =render :partial=> 'comments/comment', :collection => comment.comments, :locals => { :level => level + 1 }
  %hr/